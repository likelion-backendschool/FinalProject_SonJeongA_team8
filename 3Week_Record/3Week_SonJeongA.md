# 3Week_SonJeongA.md

## Title: [3Week] 손정아

### 미션 요구사항 분석 & 체크리스트

---
### 필수과제
- [x] 관리자 회원
- [x] 관리자 페이지
- [x] 정산데이터 생성
- [x] 건별정산처리
- [x] 전체 정산처리

### 추가과제
- [x] 정산데이터를 배치로 생성
  - 스프링 내장 스케쥴러를 이용해서 배치가 매달 15일 새벽4시에 실행되도록
  - @EnableScheduling 사용
  - Quartz 사용금지, 스프링의 기본적인 스케쥴링 기능을 이용해주세요.
- [x] 출금신청기능(사용자기능)
- [x] 출금처리기능(관리자기능)

### 3주차 미션 요약

---

### **정산데이터 생성**

- 결제가 된 주문품목은 정산품목으로 생성될 수 있다.

### **관리자 페이지**

- 관리자만 관리자 페이지에 접속할 수 있다.
- 개발자가 회원중 임의로 1명을 골라서 관리자로 지정
  - authLevel을 7로 지정

### **정산**

- 건별정산처리가 가능하다.
- 전체정산처리를 진행한다.
  - 여러개의 건들을 선택하여 한번에 정산처리
- 정산비율은 판매자와 멋북스가 5:5로 나눈다.
- 편의상 PG 수수료는 0원으로 가정하고 진행한다.

### **출금신청**

- 사용자는 본인이 보유한 예치금에 대해서 출금신청을 할 수 있다.
- 신청시에는 금액과 통장, 계좌번호를 입력한다.

### **출금신청 처리**

- 관리자만 관리자페이지에서 출금신청목록을 볼 수 있다.
- 해당 내역을 건별로 처리한다.
- 출금 수수료도 없다고 가정한다.

## 주요 **엔드 포인트**

## **홈**

### **관리자페이지**

---

**GET /adm/home/main**

## **주문**

### **정산데이터생성 폼**

---

**GET /adm/rebate/makeData**

- 폼 입력
  - yearMonth
    - EX : 2022-10

### **정산데이터생성**

---

**POST /adm/rebate/makeData**

- 폼 처리

## **정산**

### **정산데이터리스트**

---

**GET /adm/rebate/rebateOrderItemList**

### **정산(전체, 건별)**

---

**POST /adm/rebate/rebate**

- 입력
  - ids
    - EX : 1,4,5

**POST /adm/rebate/rebateOne/{rebateOrderItemId}**

## **출금**

### **출금신청**

---

**GET /withdraw/apply**

- 폼 입력
  - bankName
  - bankAccountNo
  - price

**POST /withdraw/apply**

- 폼 처리

### **출금처리**

---

**GET /adm/withdraw/applyList**

- 출금신청리스트

**POST /adm/withdraw/{withdrawApplyId}**

- 출금처리

**[접근 방법]**

#### **🔻관리자 회원**
- user3을 관리자 회원으로 지정하였다.
- 관리자 회원만 관리자 페이지에 들어갈 수 있다.
- 관리자 회원은 정산데이터를 생성할 수 있다.
- 관리자 회원은 건별정산처리를 할 수 있다.
- 관리자 회원은 전체정산처리를 할 수 있다.
- 관리자 회원은 authLevel이 7이다.
<br>

#### **🔻관리자 페이지**
- 일반 회원과는 다르게 로그인시 메인화면에 관리자홈 버튼이 보인다.
- 관리자 페이지는 관리자 홈, 일반회원과 공통인 홈, 정산 페이지로 이동할 수 있다.
- 일반회원은 접근이 불가능하다.
- user3을 관리자로 지정하였기 때문에 user3만 접근할 수 있다.

<br>

#### **🔻정산데이터 생성**
- 달별로 정산데이터를 생성할 수 있다.
- 생성된 정산데이터를 확인할 수 있다.


<br>

#### **🔻건별정산처리**
- 건별로 정산처리가 가능하다.
- 정산이 완료되면 정산날짜와 정산내역이 보이고 정산처리버튼이 사라진다.

<br>

#### **🔻전체정산처리**
- 전체선택을 한 후 전체정산처리가 가능하다.
- 정산이 완료되면 정산날짜와 정산내역이 보이고 정산처리버튼이 사라진다.

<br>


**[특이사항]**
- 정산이 완료되면 "정산이 처리되었습니다" 라는 알림메세지 안뜸. util 수정해야할 듯.