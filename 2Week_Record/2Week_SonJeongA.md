# 2Week_SonJeongA.md

## Title: [2Week] 손정아

### 미션 요구사항 분석 & 체크리스트

---
### 필수과제
- [x] 주문
- [x] 결제
- [x] 장바구니
- [ ] PG연동

### 추가과제
- [ ] 환불

### 2주차 미션 요약

---

### **장바구니**

- 상품이 곧 도서이다.
- 도서를 장바구니에 담을 수 있다.
- 장바구니에서 도서를 제거할 수 있다.
- 장바구니에 담긴 도서들을 가지고 주문을 할 수 있다.

### **주문/결제**

- 주문을 하면 일단 주문의 상태는 준비상태이다.
  - 여기서 결제를 하거나, 주문취소를 할 수 있다.
- 회원이 결제를 할 때 기존에 소유하고 있는 캐시를 사용할 수 있다.
- 본 쇼핑몰에서의 모든 현금 흐름은 CashLog 에 기록된다.
- CashLog 테이블은 사이버 머니에 대한 기록 테이블이다.
- 결제를 하게되면 CashLog 테이블에 돈이 충전된 후 바로 사용된다.
- 토스 페이먼츠를 이용해서 카드 결제를 구현한다.
- 결제가 완료되면 MyBook 테이블에 책이 구매된 책이 추가되어야 한다.

### **환불**

- 결제 후 10분 이내에 환불 할 수 있다.

**[접근 방법]**

#### **🔻장바구니**
- layout.html에 장바구니 버튼을 추가하여 내가 담은 상품을 바로 확인 할 수 있도록 구현.
- 선택버튼을 추가하여 선택한 상품이 장바구니에서 삭제 가능하도록 구현.
- 전체 걸제를 누르면 결제페이지로 이동하도록 구현.

<br>

#### **🔻주문/결제**
- 결제 할 품목을 확인할 수 있다.
- 결제 할 금액을 확인할 수 있다.
- 남아있는 예치금 금액을 확인할 수 있다.
- 예치금을 사용하면 차액을 카드로 결제할 수 있도록 구현하였다.
- 결제버튼을 클릭하면 토스 결제창이 뜬다.

<br>



**[특이사항]**
- 도서글 삭제시  Cannot delete or update a parent row: a foreign key constraint fails 오류 발생. 삭제하려고 하는 테이블 또는 행이 다른 곳에서 참조하고 있기 때문에 발생하는 문제인데 오류 해결 아직 못했음.
- 예치금 사용시 값 입력 안하면 null 값이 입력되어 파라미터 값이 안넘어와서 결제버튼 클릭해도 결제창이 안뜸.